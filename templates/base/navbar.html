{% load static %}

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container">
    <a class="navbar-brand" href="{% url 'main:index' %}" style="display:flex; align-items:center; gap:8px;">
      <!-- logo -->
      <svg width="200" height="60" viewBox="0 0 80 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <polygon points="12,4 20,8 20,16 12,20 4,16 4,8" fill="#23272b" stroke="#43e97b" stroke-width="1"/>
        <text x="8" y="16" font-size="7" fill="#43e97b" font-family="Consolas, monospace" font-weight="bold" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" transform="translate(4,-3)">bin</text>
        <text x="28" y="17" font-size="14" fill="#43e97b" font-family="Segoe UI, Arial, sans-serif" font-weight="bold">Binify</text>
      </svg>
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
      aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto align-items-center">
        <li class="nav-item">
          {% comment %} Пошук {% endcomment %}
          <form class="d-flex" method="get" action="#">
            <div class="position-relative me-3" style="width: 220px;">
              <input class="form-control rounded-pill ps-4" type="search" placeholder="Пошук" aria-label="Пошук" name="q" style="border-radius:2rem;" oninput="document.getElementById('search-icon').style.display = this.value ? 'none' : 'inline';">
              <span class="position-absolute top-50 end-0 translate-middle-y pe-3" style="pointer-events:none;" id="search-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="#888" viewBox="0 0 16 16">
                  <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85zm-5.442 1.398a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11z"/>
                </svg>
              </span>
            </div>
          </form>
        </li>
        {% comment %} <li class="nav-item"><a class="btn btn-logo me-2" href="{% url 'main:main' %}">Головна</a></li> {% endcomment %}
        <li class="nav-item"><a class="btn btn-logo me-2" href="{% url 'bins:index' %}">Створити Bin</a></li>
        <li class="nav-item"><a class="btn btn-logo me-2" href="{% url 'main:about' %}">Про сайт</a></li>
        {% if user.is_authenticated %}
          <li class="nav-item dropdown ms-3">
            <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <img src="{% if user.image %}{{ user.image.url }}{% else %}{% static 'deps/images/baseavatar.jpg' %}{% endif %}" alt="avatar" class="rounded-circle" width="40" height="40">
            </a>
            <ul class="dropdown-menu dropdown-menu-end user-dropdown-dark-green" aria-labelledby="userDropdown">
              <li><a class="dropdown-item user-dropdown-green" href="{% url "bins:user_bins" %}">Мої Bin</a></li>
              <li><a class="dropdown-item user-dropdown-green" href="#">Мої коментарі</a></li>
              <li><a class="dropdown-item user-dropdown-green" href="{% url 'users:profile' %}">Мій профіль</a></li>
              {% if user.is_admin or user.is_staff %}
                <li><a class="dropdown-item user-dropdown-green" href="{% url "admin:index" %}">Адмін панель</a></li>
              {% endif %}
              <li><hr class="dropdown-divider user-dropdown-divider"></li>
              <li><a class="dropdown-item user-dropdown-green text-danger" href="{% url 'users:logout' %}">Вийти</a></li>
            </ul>
          </li>
        {% else %}
          <li class="nav-item"><a class="btn btn-logo me-2" href="{% url "users:login" %}">Увійти</a></li>
        {% endif %}
      </ul>
    </div>
  </div>
</nav>
